{"version":3,"sources":["app.js","config.js","environment.js","main.js","resources/index.js","security/AuthorizeStep.js","services/AuthService.js","components/about/about.js","components/home/home.js","components/protect/protect.js","/Users/sdksdk/Workspace/javascriptProjects/aureliaProjects/initProject/src/app.html","/Users/sdksdk/Workspace/javascriptProjects/aureliaProjects/initProject/src/components/about/about.html","/Users/sdksdk/Workspace/javascriptProjects/aureliaProjects/initProject/src/components/home/home.html","/Users/sdksdk/Workspace/javascriptProjects/aureliaProjects/initProject/src/components/protect/protect.html"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["import AuthorizeStep from './security/AuthorizeStep'\n\nexport class App {\n\tconfigureRouter(config, router) {\n\t\tconfig.title = 'Aurelia';\n\t\tconfig.addPipelineStep('authorize', AuthorizeStep);\n\t\tconfig.map([\n\t\t\t{ route: ['', 'home'], name: 'home', moduleId: './components/home/home', nav: true, title: 'home', settings: { roles: [] }, auth: false},\n\t\t\t{ route: 'about', name: 'about', moduleId: './components/about/about', nav: true, title: 'Github Users', settings: { roles: [] }, auth: false},\n\t\t\t{ route: 'protected', name: 'protected', moduleId: './components/protect/protect', nav: true, title: 'protected Page', settings: { roles: ['admin'] }, auth: true}\n\t\t]);\n\n\t\tthis.router = router;\n\t}\n}\n","export default {\n    baseUrl: 'http://localhost:8080/api' ,\n    tokenName: 'token'\n};","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\nimport {LogManager} from 'aurelia-framework';\nimport {ConsoleAppender} from 'aurelia-logging-console';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nLogManager.addAppender(new ConsoleAppender());\nLogManager.setLevel(LogManager.logLevel.debug);\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {Redirect} from 'aurelia-router';\nimport AuthService from '../services/AuthService';\nimport {inject} from 'aurelia-framework';\n\n@inject(AuthService)\nexport default class AuthorizeStep {\n\n\tconstructor(authService) {\n        this.auth = authService;\n    }\n\n\trun(navigationInstruction, next) {\n\t\tconsole.log(\"AuthorizeStep loading\");\n\t\tconsole.log(this.auth.isAuthenticated());\n\t\t//algoritmo de permissoes ficarÃ¡ aqui\n\t\t// console.log(navigationInstruction.getAllInstructions().some(i => console.log(i.config.settings)));\n\t\t// if (navigationInstruction.getAllInstructions().some(i => i.config.settings.roles.indexOf('admin') !== -1)) {\n\t\tif (navigationInstruction.getAllInstructions().some(i => i.config.auth)) {\n\t\t\tconsole.log(\"path protegida por auth\");\n\t\t\t// var isAdmin = /* insert magic here */false;\n\t\t\tlet isAdmin = this.auth.isAuthenticated();\n\n\t\t\tif (!isAdmin) {\n\t\t\t\treturn next.cancel(new Redirect('home'));\n\t\t\t}\n\t\t}\n\n\t\treturn next();\n\t}\n}","import config from '../config'\nimport { HttpClient } from 'aurelia-http-client';\nimport {LogManager} from 'aurelia-framework';\nimport {inject} from 'aurelia-framework';\n\n@inject(HttpClient)\nexport default class AuthService {\n\n    constructor(http) {\n        this.logger = LogManager.getLogger('AuthService');\n        this.logger.debug('Iniciando AuthService');\n        this.http = http.configure(http => {\n            http.withBaseUrl(config.baseUrl);\n        });\n    }\n\n    login(login, password) {\n        this.logger.debug('Executando login');\n        this.http\n        .post('/login', {login, password})\n        .then(data => {\n            console.log(data);\n            localStorage[config.tokenName] = JSON.parse(data.response).token;\n            // console.log(data.response);\n\n            // console.log(JSON.parse(data.response).token);\n            // return data.response;\n        })\n        .catch(error => {\n            console.log('ocorreu um erro');\n            console.log(error);\n        });\n        // .then(response => console.log(response));\n    }\n\n    logout() {\n        this.logger.debug('logout');\n        localStorage[config.tokenName] = null;\n    }\n\n    isAuthenticated() {\n        return localStorage[config.tokenName] != null;\n    }\n\n}","export class About {\n    \n}","import AuthService from '../../services/AuthService'\nimport {LogManager} from 'aurelia-framework';\nimport {inject} from 'aurelia-framework';\n\n@inject(AuthService)\nexport class home {\n    \n    constructor(authService) {\n        let logger = LogManager.getLogger('HomeModule');\n        logger.debug('me');\n        // console.log(\"iniciando home\");\n        this.auth = authService;\n        this.auth.login(\"admin\", \"admin\");\n    }\n}","export class protect {\n\n}",null,null,null,null],"sourceRoot":"../src"}